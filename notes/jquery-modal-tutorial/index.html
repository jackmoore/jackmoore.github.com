<!doctype html public 'What are you looking at? (ง •̀_•́)ง'>
<html lang=en>
	<head>
		<meta charset='utf-8'/>
		<meta name='viewport' content='width=device-width, initial-scale=1'/>
		<title>jQuery Modal Tutorial</title>
		<link rel='stylesheet' href='//fonts.googleapis.com/css?family=Open+Sans:400,600&amp;subset=latin'/>
		<link rel='stylesheet' href='/app.css'/>
	</head>
	<body>
		<div class='Root'><header class='Header'><div class='Header_body'><a href='/' class='Header_pic'></a><a rel='author' href='/' class='Header_me'>Jack Moore</a><nav><a href='http://github.com/jackmoore' title='Github Profile' rel='me'><span class='Header_ribbon Header_icon'><span aria-hidden='true' class='Icon'><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1664 896q0 251-146.5 451.5t-378.5 277.5q-27 5-39.5-7t-12.5-30v-211q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105 20.5-150.5q0-121-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27t-83.5-38.5-86-13.5q-44 113-7 204-79 85-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-40 36-49 103-21 10-45 15t-57 5-65.5-21.5-55.5-62.5q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 89t.5 54q0 18-13 30t-40 7q-232-77-378.5-277.5t-146.5-451.5q0-209 103-385.5t279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"></path></svg></span></span></a><a href='http://twitter.com/jacklmoore' title='Twitter Profile' rel='me'><span class='Header_ribbon Header_icon'><span aria-hidden='true' class='Icon'><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path></svg></span></span></a><a href='/notes'><span class='Header_ribbon'>Archive</span></a></nav></div></header><div class='Main'><main role='main' class='Main_body'><div class='Post'><h1>jQuery Modal Tutorial</h1><div class='SubHeading'>A basic modal is actually easy to code, and is sometimes more appropriate than a feature-full modal or lightbox plugin. This guide will walk through writing the necessary CSS and JavaScript.</div><hr/><p class='Post_date'><span aria-hidden='true' class='Icon'><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M192 1664h288v-288h-288v288zm352 0h320v-288h-320v288zm-352-352h288v-320h-288v320zm352 0h320v-320h-320v320zm-352-384h288v-288h-288v288zm736 736h320v-288h-320v288zm-384-736h320v-288h-320v288zm768 736h288v-288h-288v288zm-384-352h320v-320h-320v320zm-352-864v-288q0-13-9.5-22.5t-22.5-9.5h-64q-13 0-22.5 9.5t-9.5 22.5v288q0 13 9.5 22.5t22.5 9.5h64q13 0 22.5-9.5t9.5-22.5zm736 864h288v-320h-288v320zm-384-384h320v-288h-320v288zm384 0h288v-288h-288v288zm32-480v-288q0-13-9.5-22.5t-22.5-9.5h-64q-13 0-22.5 9.5t-9.5 22.5v288q0 13 9.5 22.5t22.5 9.5h64q13 0 22.5-9.5t9.5-22.5zm384-64v1280q0 52-38 90t-90 38h-1408q-52 0-90-38t-38-90v-1280q0-52 38-90t90-38h128v-96q0-66 47-113t113-47h64q66 0 113 47t47 113v96h384v-96q0-66 47-113t113-47h64q66 0 113 47t47 113v96h128q52 0 90 38t38 90z"></path></svg></span> January 20, 2012</p><div><h3>See The <a href='/demo/modal/modal2.html'>Demo</a></h3>
<h2>Drafting the HTML</h2>
<p>I like to create a rough draft just using HTML and CSS, leaving the scripting for last.  I'll write the HTML first to structure the modal, even though the final HTML will be generated by the script.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">'overlay'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">'modal'</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">'content'</span>&gt;</span>No JavaScript Yet!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">'#'</span> <span class="hljs-attr">id</span>=<span class="hljs-string">'close'</span>&gt;</span>close<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>This modal will have two root elements: <code>#overlay</code> and <code>#modal</code>.  The overlay is going to be a semi-transparent layer that fills the visitor's viewport. This turns the modal into a focal point, and reduces focus for the rest of the page.</p>
<h2>The CSS</h2>
<pre><code class="language-css"><span class="hljs-selector-id">#overlay</span> {
  <span class="hljs-attribute">position</span>: fixed; 
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
  <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">alpha</span>(opacity=50);
}
</code></pre>
<p>The overlay has a fixed position that is relative to the visitor's viewport.  The 100% width and height refer to the viewport size, so we get complete coverage no matter what part of the page the visitor is actually viewing. Unfortunately, fixed position is not supported in iOS 4 or below.  IE8 and IE7 do not support opacity, so an alpha filter is used instead.</p>
<pre><code class="language-css"><span class="hljs-selector-id">#modal</span> {
  <span class="hljs-attribute">position</span>:absolute;
  <span class="hljs-attribute">background</span>:<span class="hljs-built_in">url</span>(tint20.png) <span class="hljs-number">0</span> <span class="hljs-number">0</span> repeat;
  <span class="hljs-attribute">background</span>:<span class="hljs-built_in">rgba</span>(0,0,0,0.2);
  <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">14px</span>;
  <span class="hljs-attribute">padding</span>:<span class="hljs-number">8px</span>;
}

<span class="hljs-selector-id">#content</span> {
  <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">8px</span>;
  <span class="hljs-attribute">background</span>:<span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">padding</span>:<span class="hljs-number">20px</span>;
}
</code></pre>
<p>The important thing here is that #modal will be absolutely positioned, the rest of the rules just provide a nice default appearance.</p>
<p>The RGBa background will give a black fill (0,0,0) at 20% opacity (0.2), which will overwrite the previous background property. IE8 does not support RGBa, so it will continue to use the previous background property which uses a semi-transparent PNG background image.</p>
<p>I gave <code>#modal</code> a larger border-radius than <code>#content</code>.  This made a border that is natural looking and consistent in thickness.  IE8 does not support border-radius and will instead display the normal square corners.</p>
<pre><code class="language-css"><span class="hljs-selector-id">#close</span> {
  <span class="hljs-attribute">position</span>:absolute;
  <span class="hljs-attribute">background</span>:<span class="hljs-built_in">url</span>(close.png) <span class="hljs-number">0</span> <span class="hljs-number">0</span> no-repeat;
  <span class="hljs-attribute">width</span>:<span class="hljs-number">24px</span>;
  <span class="hljs-attribute">height</span>:<span class="hljs-number">27px</span>;
  <span class="hljs-attribute">display</span>:block;
  <span class="hljs-attribute">text-indent</span>:-<span class="hljs-number">9999px</span>;
  <span class="hljs-attribute">top</span>:-<span class="hljs-number">7px</span>;
  <span class="hljs-attribute">right</span>:-<span class="hljs-number">7px</span>;
}
</code></pre>
<p>The close button is absolutely positioned relative #modal, since <code>#modal</code> is its closest ancestor element with positioning.  Since I used an anchor element for the close button, its default display of <code>inline</code> must be changed to <code>block</code> in order to apply a fixed width and height to it.  Text-indent moves the anchor's text offscreen so that it will not overlay the background image.</p>
<h3>See The <a href='/demo/modal/modal1.html'>Work In Progress</a></h3>
<h2>The Script</h2>
<p>I would like the modal to handle the following things:</p>
<ul>
<li>Create its own HTML and append it to the document</li>
<li>Display specified content</li>
<li>Open on command</li>
<li>Close on command</li>
<li>Be positioned in the center of the viewport</li>
<li>Stay centered if the viewport is resized</li>
</ul>
<p>Let's stub out the function and variable names:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> modal = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">var</span> 
  method = {},
  $overlay,
  $modal,
  $content,
  $close;

  <span class="hljs-comment">// Append the HTML</span>

  <span class="hljs-comment">// Center the modal in the viewport</span>
  method.center = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{};

  <span class="hljs-comment">// Open the modal</span>
  method.open = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">settings</span>) </span>{};

  <span class="hljs-comment">// Close the modal</span>
  method.close = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{};

  <span class="hljs-keyword">return</span> method;
}());
</code></pre>
<p>Here we have a function that is immediately executed and returns an object containing the methods needed to control the modal.  This object is assigned to the modal variable.  The rest of the variables are references to their corresponding elements in the document.  Now lets fill in the missing code.</p>
<h3>Append The HTML</h3>
<pre><code class="language-javascript">$overlay = $(<span class="hljs-string">'&lt;div id="overlay"&gt;&lt;/div&gt;'</span>);
$modal = $(<span class="hljs-string">'&lt;div id="modal"&gt;&lt;/div&gt;'</span>);
$content = $(<span class="hljs-string">'&lt;div id="content"&gt;&lt;/div&gt;'</span>);
$close = $(<span class="hljs-string">'&lt;a id="close" href="#"&gt;close&lt;/a&gt;'</span>);

$modal.hide();
$overlay.hide();
$modal.append($content, $close);

$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  $(<span class="hljs-string">'body'</span>).append($overlay, $modal);
});
</code></pre>
<p>This generates the same HTML structure we drafted previously, and adds it to the document.</p>
<h3>Center Method</h3>
<pre><code class="language-javascript">method.center = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> top, left;

  top = <span class="hljs-built_in">Math</span>.max($(<span class="hljs-built_in">window</span>).height() - $modal.outerHeight(), <span class="hljs-number">0</span>) / <span class="hljs-number">2</span>;
  left = <span class="hljs-built_in">Math</span>.max($(<span class="hljs-built_in">window</span>).width() - $modal.outerWidth(), <span class="hljs-number">0</span>) / <span class="hljs-number">2</span>;

  $modal.css({
    top:top + $(<span class="hljs-built_in">window</span>).scrollTop(), 
    left:left + $(<span class="hljs-built_in">window</span>).scrollLeft()
  });
};
</code></pre>
<p>Here we balance the distance between each side of the viewport and each side of the modal.  jQuery's .outerWidth() and .outerHeight() are used because borders and padding should also be factored in.  I used Math.max() so that I could be sure that no value returned would be less than 0.  This means that if the modal is larger than the visitor's viewport, it will be positioned in the top left of the viewport rather than potentially spanning beyond the top or left edge of the document, where it would be inaccessible.  $(window).scrollTop() returns the position of the vertical scrollbar, which is the distance from the top of the document to the top of the viewport.  This needs to be added to account for any scrolling that has happened.</p>
<h3>Open Method</h3>
<pre><code class="language-javascript">method.open = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">settings</span>) </span>{
  $content.empty().append(settings.content);

  $modal.css({
    width: settings.width || <span class="hljs-string">'auto'</span>, 
    height: settings.height || <span class="hljs-string">'auto'</span>
  })

  method.center();

  $(<span class="hljs-built_in">window</span>).bind(<span class="hljs-string">'resize.modal'</span>, method.center);

  $modal.show();
  $overlay.show();
};
</code></pre>
<p>The open method accepts an object of our settings.  It can contain three properties: content, width, height.  Content can be text, HTML, or an element/jQuery object.  We append the data from settings.content to #content, and give #modal a width and height if either was specified in the settings object.  Method.center() is called to center the modal in the viewport and is bound to the window's resize event.  This will cause the modal to re-center itself whenever the viewport changes size.  I made use of jQuery's <a href='http://docs.jquery.com/Namespaced_Events'>event name-spacing</a> so that later, when we unbind the event, we can make sure not to disturb any other resize events that other scripts may have bound to the window.  The last thing we do is reveal #modal and #overlay.</p>
<h3>Close Method</h3>
<pre><code class="language-javascript">method.close = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  $modal.hide();
  $overlay.hide();
  $content.empty();
  $(<span class="hljs-built_in">window</span>).unbind(<span class="hljs-string">'resize.modal'</span>);
};
</code></pre>
<p>Here we hide the #modal and the #overlay and remove the content.  Then we unbind the resize event because there is no need for it when the modal is closed.  Outside of the method</p>
<h3>Close Button</h3>
<pre><code class="language-javascript">$close.click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
  e.preventDefault();
  method.close();
});
</code></pre>
<p>The default action of the click event is canceled (the browser from redirecting to the link's href) by calling e.preventDefault(), then the close method is called.</p>
<h3>Examples Calling The Modal</h3>
<pre><code class="language-javascript">modal.open({content: <span class="hljs-string">"Howdy"</span>});

modal.open({content: <span class="hljs-string">"&lt;p&gt;Howdy&lt;/p&gt;"</span>});

modal.open({content: $(<span class="hljs-string">"&lt;p&gt;Howdy&lt;/p&gt;"</span>), width: <span class="hljs-string">"500px"</span>, height: <span class="hljs-string">"200px"</span>});

<span class="hljs-comment">// Ajax</span>
$.get(<span class="hljs-string">'ajax.html'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
  modal.open({content: data});
});
</code></pre>
<h3>See The <a href='/demo/modal/modal2.html'>Demo</a></h3>
</div><div class='Bio'><h2>Hey,</h2><p>Follow me on <a href='http://twitter.com/jacklmoore' rel='me'>Twitter</a> and <a href='http://github.com/jackmoore' rel='me'>Github</a>, that's where I'm most active these days. I welcome email (<span class='Bio_email'></span>), but I'm afraid I no longer have time to answer personal requests for help regarding my plugins or posts.  Thanks!</p><iframe src='http://ghbtns.com/github-btn.html?user=jackmoore&type=follow' allowTransparency='true' frameBorder='0' scrolling='0' width='170' height='20'></iframe><p><a href='https://twitter.com/jacklmoore' data-show-count='false' class='twitter-follow-button'>Follow @jacklmoore</a></p><div><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='//platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');</script></div></div></div></main><div class='Main_aside'><aside class='SideBar'><h3>Scripts</h3><ul><li><a href='/colorbox'>Colorbox</a> » jQuery lightbox. Need the <a href='/colorbox/faq/'>FAQ</a>?</li><li><a href='/autosize'>Autosize</a> » Automatically resize textarea height</li><li><a href='/zoom'>Zoom</a> » jQuery plugin to enlarge images</li><li><a href='/wheelzoom'>Wheelzoom</a> » Enlarge images using scroll</li></ul><div><h3>Recent Posts</h3><ul><li key='0'><a href='/notes/rounding-in-javascript/'>Rounding Decimals in JavaScript</a></li><li key='1'><a href='/notes/mouse-position/'>Cross-browser mouse positioning</a></li><li key='2'><a href='/notes/css3-ribbon-menu/'>CSS Ribbon Menu</a></li><li><a href='/notes/'>(view older…)</a></li></ul></div><h3>Tags</h3><ul class='Tags'><li><a href='/notes/#tag-all' data-tag='all'>All</a></li><li key='css'><a href='/notes/#tag-css' data-tag='css'>CSS <span>(4)</span></a></li><li key='colorbox'><a href='/notes/#tag-colorbox' data-tag='colorbox'>Colorbox <span>(1)</span></a></li><li key='html5'><a href='/notes/#tag-html5' data-tag='html5'>HTML5 <span>(2)</span></a></li><li key='illustration'><a href='/notes/#tag-illustration' data-tag='illustration'>Illustration <span>(1)</span></a></li><li key='internet-explorer'><a href='/notes/#tag-internet-explorer' data-tag='internet-explorer'>Internet Explorer <span>(3)</span></a></li><li key='javascript'><a href='/notes/#tag-javascript' data-tag='javascript'>JavaScript <span>(8)</span></a></li><li key='jquery'><a href='/notes/#tag-jquery' data-tag='jquery'>jQuery <span>(7)</span></a></li></ul></aside></div></div></div>
		<script src="/js/main.js"></script>
	</body>
</html>