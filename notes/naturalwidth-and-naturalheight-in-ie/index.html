
<!doctype html public '(╯°□°）╯︵ 8ƎI'>
<html lang=en class=''>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' href='//fonts.googleapis.com/css?family=Open+Sans:400,600&amp;subset=latin'>
    <link rel='stylesheet' href='/css/style.css'>
    <link rel='stylesheet' href='/css/github.css'>
    <!--[if lt IE 9]><script src='/js/html5.js'></script><![endif]-->
    <title>NaturalWidth and NaturalHeight in IE</title>
    <header>
        <a class='me' rel='author' href='/'>Jack Moore</a>
        <a class='twitter' href='http://twitter.com/jacklmoore' rel='me'><i class='icon-twitter'></i></a>
        <a class='github' href='http://github.com/jackmoore' rel='me'>Github</a>
        <nav>
            <a href='/notes'><span>Archive</span></a>
        </nav>
    </header>
    <div class='main' role='main'>
        <article>
            
            <h1>NaturalWidth and NaturalHeight in IE</h1>
            <p class='description'>Getting the naturalWidth and naturalHeight for an image in any browser.</p>
            <hr>
            <p class='date'><span class='icon-calendar icon--inline'></span>October 23rd, 2011</p>
            <h3 id="actual-width-and-height-in-modern-browsers">Actual width and height in modern browsers</h3>
<p>Modern browsers (including IE9) provide naturalWidth and naturalHeight properties to IMG elements.  These properties contain the actual, non-modified width and height of the image.</p>
<p>{% highlight javascript %}
  var 
  nWidth = document.getElementById(&#39;example&#39;).naturalWidth,
  nHeight = document.getElementById(&#39;example&#39;).naturalHeight;
{% endhighlight %}</p>
<h3 id="actual-width-and-height-in-ie8-and-ie7">Actual width and height in IE8 and IE7</h3>
<p>The naturalWidth and naturalHeight properties are not supported in IE8 or lower.  The height and width property will give the apparent width and height after stylesheet and inline styles, inline width and height attributes, and the display property of the image and the image&#39;s parent elements have been applied.  The simplest way to get the unmodified width and height is to create a new image element, and use it&#39;s width and height property.</p>
<p>{% highlight javascript %}
  function getNatural (DOMelement) {
    var img = new Image();
    img.src = DOMelement.src;
    return {width: img.width, height: img.height};
  }</p>
<p>  var 
  natural = getNatural(document.getElementById(&#39;example&#39;)),
  nWidth = natural.width,
  nHeight = natural.height;
{% endhighlight %}</p>
<h3 id="jquery-naturalwidth-and-naturalheight-">jQuery naturalWidth() and naturalHeight()</h3>
<p>Here is a short jQuery (any version) plugin that adds two methods: naturalWidth() and naturalHeight().  It uses branching to determine if naturalWidth and naturalHeight are supported by the browser.  If supported, the method just becomes a getter for the naturalWidth or naturalHeight property.  If not supported, the method creates a new unstyled image element and returns that element&#39;s actual width and height.</p>
<p>{% highlight javascript %}
  // adds .naturalWidth() and .naturalHeight() methods to jQuery
  // for retreaving a normalized naturalWidth and naturalHeight.
  (function($){
    var
    props = [&#39;Width&#39;, &#39;Height&#39;],
    prop;</p>
<pre><code><span class="hljs-keyword">while</span> (prop = props.pop()) {
(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(natural, prop)</span> </span>{
  $.fn[natural] = (natural <span class="hljs-keyword">in</span> <span class="hljs-keyword">new</span> Image()) ? 
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>][natural];
  } : 
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">var</span> 
  node = <span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>],
  img,
  value;

  <span class="hljs-keyword">if</span> (node.tagName.toLowerCase() === <span class="hljs-string">'img'</span>) {
    img = <span class="hljs-keyword">new</span> Image();
    img.src = node.src,
    value = img[prop];
  }
  <span class="hljs-keyword">return</span> value;
  };
}(<span class="hljs-string">'natural'</span> + prop, prop.toLowerCase()));
}
</code></pre><p>  }(jQuery));</p>
<p>  // Example usage:
  var 
  nWidth = $(&#39;img#example&#39;).naturalWidth(),
  nHeight = $(&#39;img#example&#39;).naturalHeight();
{% endhighlight %}</p>

            <hr>
            <h2>Hey,</h2>
            <p>Follow me on <a href="http://twitter.com/jacklmoore" rel='me'>Twitter</a> and <a href="http://github.com/jackmoore" rel='me'>Github</a>, that's where I'm most active these days.  I welcome email (<span class='email'></span>), but I'm afraid I no longer have time to answer personal requests for help regarding my plugins or posts.  Thanks!</p>
            <p>
            <iframe src="http://ghbtns.com/github-btn.html?user=jackmoore&amp;type=follow&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="170" height="20"></iframe>
            <a href="https://twitter.com/jacklmoore" class="twitter-follow-button" data-show-count="true">Follow @jacklmoore</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </p>
        
        </article>
        <aside>
            <h3>Github Repos</h3>
            <ul>
                <li><a href='/colorbox'>Colorbox</a> &raquo; jQuery lightbox. Need the <a href='/colorbox/faq/'>FAQ</a>?
                <li><a href='/autosize'>Autosize</a> &raquo; Automatically resize textarea height
                <li><a href='/zoom'>Zoom</a> &raquo; jQuery plugin to enlarge images
                <li><a href='/wheelzoom'>Wheelzoom</a> &raquo; enlarge images on mousewheel
            </ul>
            <div class='recent-posts'>
                <h3>Blog Posts</h3>
                <ul>
                    
                <li><a href="/notes/rounding-in-javascript/">Rounding Decimals in JavaScript</a>
            
                <li><a href="/notes/mouse-position/">Cross-browser mouse positioning</a>
            
                <li><a href="/notes/css3-ribbon-menu/">CSS Ribbon Menu</a>
            
                <li><a href="/notes/jquery-modal-tutorial/">jQuery Modal Tutorial</a>
            
                <li><a href="/notes/jquery-accordion-tutorial/">A Better jQuery Accordion</a>
            
                <li><a href="/notes/ie-opacity-inheritance/">Fixing IE's Opacity Inheritance</a>
            
                <li><a href="/notes/jquery-tabs/">jQuery Tabs Tutorial</a>
            
                <li><a href="/notes/form-placeholder-text/">HTML5 Placeholder Attribute</a>
            
                <li><a href="/notes/naturalwidth-and-naturalheight-in-ie/">NaturalWidth and NaturalHeight in IE</a>
            
                <li><a href="/notes/colorbox-with-json-or-flickr/">Colorbox with Flickr Feed</a>
            
                <li><a href="/notes/tragedy-struck-on-threadless/">Tragedy Struck On Threadless</a>
            
                <li><a href="/notes/click-events/">Working with JavaScript click events</a>
            
                <li><a href="/notes/ie-transparency-problems/">Solving IE7 &amp; IE8 PNG Opacity Problems</a>
            
                <li><a href="/notes/substring-substr-slice-javascript/">JavaScript: Slice, Substring, or Substr?</a>
            
                </ul>
            </div>
            <h3>Tags</h3>
            <ul class='tags'>
                
                <li>
                    <a href='/notes/#tag-javascript' class='tag-javascript'>JavaScript <span>x8</span></a>
                </li>
            
                <li>
                    <a href='/notes/#tag-css' class='tag-css'>CSS <span>x4</span></a>
                </li>
            
                <li>
                    <a href='/notes/#tag-html5' class='tag-html5'>HTML5 <span>x2</span></a>
                </li>
            
                <li>
                    <a href='/notes/#tag-jquery' class='tag-jquery'>jQuery <span>x7</span></a>
                </li>
            
                <li>
                    <a href='/notes/#tag-internet-explorer' class='tag-internet-explorer'>Internet Explorer <span>x3</span></a>
                </li>
            
                <li>
                    <a href='/notes/#tag-colorbox' class='tag-colorbox'>Colorbox <span>x1</span></a>
                </li>
            
                <li>
                    <a href='/notes/#tag-illustration' class='tag-illustration'>Illustration <span>x1</span></a>
                </li>
            
            </ul>
        </aside>
    </div>
    <script src="/js/main.js"></script>
        