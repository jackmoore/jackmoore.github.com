
<!doctype html public '(╯°□°）╯︵ 8ƎI'>
<html lang=en class=''>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width, initial-scale=1'>
	<link rel='stylesheet' href='//fonts.googleapis.com/css?family=Open+Sans:400,600&amp;subset=latin'>
	<link rel='stylesheet' href='/css/style.css'>
	<link rel='stylesheet' href='/css/github.css'>
	<!--[if lt IE 9]><script src='/js/html5.js'></script><![endif]-->
	<title>Rounding Decimals in JavaScript</title>
	<header>
		<a class='me' rel='author' href='/'>Jack Moore</a>
		<a class='twitter' href='http://twitter.com/jacklmoore' rel='me'><i class='icon-twitter'></i></a>
		<a class='github' href='http://github.com/jackmoore' rel='me'>Github</a>
		<nav>
			<a href='/notes'><span>Archive</span></a>
		</nav>
	</header>
	<div class='main' role='main'>
		<article>
			
			<h1>Rounding Decimals in JavaScript</h1>
			<p class='description'>A more accurate way to round with decimals</p>
			<hr>
			<p class='date'><span class='icon-calendar icon--inline'></span>March 1st, 2014</p>
			<h2>Why it's complicated</h2>
<p>JavaScript's Math object provides a method for rounding to whole numbers.  If we want to round to a set number of decimal places, then we have to handle that ourselves.  This post doesn't get into the details of <a href="http://floating-point-gui.de/">floating-point arithmetic</a>, but the short of it is most programming languages use a binary floating-point representation which can only approximate many decimal fractions.  This results in rounding errors for the most common approaches to rounding in JavaScript.</p>
<h2>Rounding Errors</h2>
<p>The most common solutions for rounding to a decimal place is to either use <code>Number.prototype.toFixed()</code>, or multiply the float by some power of 10 in order to leverage <code>Math.round()</code>.  Both of these work, except sometimes a decimal of 5 is rounded down instead of up.</p>
<pre><code class="language-javascript"><span class="hljs-built_in">Number</span>((<span class="hljs-number">1.005</span>).toFixed(<span class="hljs-number">2</span>)); <span class="hljs-comment">// 1 instead of 1.01</span>
</code></pre>
<pre><code class="language-javascript"><span class="hljs-built_in">Math</span>.round(<span class="hljs-number">1.005</span>*<span class="hljs-number">100</span>)/<span class="hljs-number">100</span>; <span class="hljs-comment">// 1 instead of 1.01</span>
</code></pre>
<h2>A Better Solution</h2>
<p>The rounding problem can be avoided by using numbers represented in exponential notation:</p>
<pre><code class="language-javascript"><span class="hljs-built_in">Number</span>(<span class="hljs-built_in">Math</span>.round(<span class="hljs-number">1.005</span>+<span class="hljs-string">'e2'</span>)+<span class="hljs-string">'e-2'</span>); <span class="hljs-comment">// 1.01</span>
</code></pre>
<p>And to abstract that into something more usable:</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">round</span><span class="hljs-params">(value, decimals)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Number</span>(<span class="hljs-built_in">Math</span>.round(value+<span class="hljs-string">'e'</span>+decimals)+<span class="hljs-string">'e-'</span>+decimals);
}

round(<span class="hljs-number">1.005</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// 1.01</span>
</code></pre>
<p>A much more robust function can be found in MDN's <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round">Math.round()</a> documentation page.</p>

			<hr>
			<h2>Hey,</h2>
			<p>Follow me on <a href="http://twitter.com/jacklmoore" rel='me'>Twitter</a> and <a href="http://github.com/jackmoore" rel='me'>Github</a>, that's where I'm most active these days.  I welcome email (<span class='email'></span>), but I'm afraid I no longer have time to answer personal requests for help regarding my plugins or posts.  Thanks!</p>
			<p>
			<iframe src="http://ghbtns.com/github-btn.html?user=jackmoore&amp;type=follow&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="170" height="20"></iframe>
			<a href="https://twitter.com/jacklmoore" class="twitter-follow-button" data-show-count="true">Follow @jacklmoore</a>
			<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
			</p>
		
		</article>
		<aside>
			<h3>Github Repos</h3>
			<ul>
				<li><a href='/colorbox'>Colorbox</a> &raquo; jQuery lightbox. Need the <a href='/colorbox/faq/'>FAQ</a>?
				<li><a href='/autosize'>Autosize</a> &raquo; Automatically resize textarea height
				<li><a href='/zoom'>Zoom</a> &raquo; jQuery plugin to enlarge images
				<li><a href='/wheelzoom'>Wheelzoom</a> &raquo; Enlarge images using scroll
			</ul>
			<div class='recent-posts'>
				<h3>Blog Posts</h3>
				<ul class='post-list'>
					<li><a href="/notes/rounding-in-javascript/">Rounding Decimals in JavaScript</a></li>
<li><a href="/notes/mouse-position/">Cross-browser mouse positioning</a></li>
<li><a href="/notes/css3-ribbon-menu/">CSS Ribbon Menu</a></li>
<li><a href="/notes/jquery-modal-tutorial/">jQuery Modal Tutorial</a></li>
<li><a href="/notes/jquery-accordion-tutorial/">A Better jQuery Accordion</a></li>
<li><a href="/notes/ie-opacity-inheritance/">Fixing IE's Opacity Inheritance</a></li>
<li><a href="/notes/jquery-tabs/">jQuery Tabs Tutorial</a></li>
<li><a href="/notes/form-placeholder-text/">HTML5 Placeholder Attribute</a></li>
<li><a href="/notes/naturalwidth-and-naturalheight-in-ie/">NaturalWidth and NaturalHeight in IE</a></li>
<li><a href="/notes/colorbox-with-json-or-flickr/">Colorbox with Flickr Feed</a></li>
<li><a href="/notes/tragedy-struck-on-threadless/">Tragedy Struck On Threadless</a></li>
<li><a href="/notes/click-events/">Working with JavaScript click events</a></li>
<li><a href="/notes/ie-transparency-problems/">Solving IE7 &amp; IE8 PNG Opacity Problems</a></li>
<li><a href="/notes/substring-substr-slice-javascript/">JavaScript: Slice, Substring, or Substr?</a></li>
				</ul>
			</div>
			<h3>Tags</h3>
			<ul class='tags'>
				<li><a href='/notes/#tag-javascript' class='tag-javascript'>JavaScript <span>x8</span></a></li>
<li><a href='/notes/#tag-css' class='tag-css'>CSS <span>x4</span></a></li>
<li><a href='/notes/#tag-html5' class='tag-html5'>HTML5 <span>x2</span></a></li>
<li><a href='/notes/#tag-jquery' class='tag-jquery'>jQuery <span>x7</span></a></li>
<li><a href='/notes/#tag-internet-explorer' class='tag-internet-explorer'>Internet Explorer <span>x3</span></a></li>
<li><a href='/notes/#tag-colorbox' class='tag-colorbox'>Colorbox <span>x1</span></a></li>
<li><a href='/notes/#tag-illustration' class='tag-illustration'>Illustration <span>x1</span></a></li>
			</ul>
		</aside>
	</div>
	<script src="/js/main.js"></script>
		